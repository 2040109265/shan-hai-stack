<template>
    
    <div class="header-container">
        <div class="logo">
            <img src="@/assets/logo.jpg" alt="logo" class="logo-photo"/>
            <h1 @click="backHome">山海栈</h1>
        </div>
        <div class="header-list">
            <div class="header-list-item" @click="toHome" type="active"><span>首页</span></div>
            <div class="header-list-item"><span>刷题</span></div>
            <div class="header-list-item" @click="toAi"><span>AI</span></div>
            <div class="header-list-item"><span>斗图</span></div>
            <div class="header-list-item"><span>水贴</span></div>
            <div class="header-list-item"><span>活动</span></div>
        </div>
        <div class="search">
        <el-input placeholder="探索山海栈"  v-model="textarea" @keyup.enter="handleFind()">
            <template #append>
                <el-icon @click="handleFind()"><Search/></el-icon>
            </template>
        </el-input>
        </div>
        <el-dropdown @mouseover="isHovered=true" @mouseleave="isHovered=false" class="createCenter">
            <el-button  class="el-button">创作者中心
                <el-icon  style="padding:5px 0 5px 5px;"><arrow-down v-if="!isHovered"/><arrow-up v-else/></el-icon>
            </el-button>
            <template #dropdown>
                <el-dropdown-menu>
                    <el-dropdown-item @click="toWriteArticle">
                    <el-icon class="create-icon"><DocumentAdd/></el-icon>
                    <span>写文章</span>    
                    </el-dropdown-item>
                    <el-dropdown-item @click="toLookArticle">
                    <el-icon class="create-icon"><Document/></el-icon>
                    <span>查看文章</span>
                    </el-dropdown-item>
                    <el-dropdown-item @click="toAi">
                    <el-icon class="create-icon"><Cpu/></el-icon>
                    <span>寻找ai</span>
                    </el-dropdown-item>
                </el-dropdown-menu>
            </template>
        </el-dropdown>
        <div class="vip">
            <el-icon class="vipIcon"><Watch /></el-icon>
            <span>会员</span>
        </div>
        <div class="message">
            <el-icon class="messageIcon" ><Bell/></el-icon>
        </div>
        <div class="me" @click="myContainer">
            <img :src="authStore.userInfo?.avatar?authStore.userInfo.avatar:defaultAvatar" alt="头像" class="img"/>
        </div>
        
    </div>
    
    <div v-show="hidden" class="overlay" @click="closeDetail"></div>
    
    <div v-show="hidden" class="myDetail" v-if="actions">
            <div class="welcome">
                <img src="@/assets/logo.jpg" style="height:20px;border-radius:50%"/>
                
                <h1>好久不见</h1>
                <p>登陆账号，我们才能更永久的陪伴你~</p>
                
            </div>
            <div class="loginType">
                <div class="loginType-button" :class="{active:loginType==='1'}" @click="loginType='1'">密码登录</div>
                <div class="loginType-button" :class="{active:loginType==='2'}" @click="loginType='2'">手机号登录</div>
                <div class="loginType-button" :class="{active:loginType==='3'}" @click="loginType='3'">邮箱登录</div>
            </div>
            <hr/>
            <div class="login">
                <Transition name="fade-transform" mode="out-in">
                    <el-form
                    v-if="loginType==='1'"
                    ref="ruleForm"
                    :model="loginForm"
                    :rules="rules"
                    class="login-form"
                    >
                    <el-form-item 
                    prop="username"
                    class="login-form-item">
                        <el-input 
                        placeholder="请输入用户名"
                        class="usernameContainer"
                        v-model="loginForm.username"
                        autocomplete="new-username"
                        >
                    <template #prefix>
                        <el-icon><UserFilled/></el-icon>
                    </template></el-input>
                    </el-form-item>
                    <el-form-item 
                    prop="password"
                    class="login-form-item">
                        <el-input 
                        v-model="loginForm.password"
                        placeholder="请输入密码"
                        class="passwordContainer" 
                        show-password
                        autocomplete="new-password">
                        <template #prefix>
                            <el-icon><Lock/></el-icon>
                        </template></el-input>
                    </el-form-item>
                    <span>忘记密码?</span>
                    <el-button class="loginButton" @click="login">
                        {{ message?"登录中...":"登录" }}
                    </el-button>

                    </el-form>
                </Transition>
            </div>
            <div class="footer">
                <span>
                    -------- &nbsp;&nbsp;&nbsp;其他方式登录&nbsp;&nbsp;&nbsp;--------
                </span>
                <div class="svg-icon">
                    <svg  aria-hidden="true" viewBox="0 0 24 24" style="fill: #b41b1b;" version="1.1"  data-view-component="true" class="icon">
                        <path d="M12 1C5.9225 1 1 5.9225 1 12C1 16.8675 4.14875 20.9787 8.52125 22.4362C9.07125 22.5325 9.2775 22.2025 9.2775 21.9137C9.2775 21.6525 9.26375 20.7862 9.26375 19.865C6.5 20.3737 5.785 19.1912 5.565 18.5725C5.44125 18.2562 4.905 17.28 4.4375 17.0187C4.0525 16.8125 3.5025 16.3037 4.42375 16.29C5.29 16.2762 5.90875 17.0875 6.115 17.4175C7.105 19.0812 8.68625 18.6137 9.31875 18.325C9.415 17.61 9.70375 17.1287 10.02 16.8537C7.5725 16.5787 5.015 15.63 5.015 11.4225C5.015 10.2262 5.44125 9.23625 6.1425 8.46625C6.0325 8.19125 5.6475 7.06375 6.2525 5.55125C6.2525 5.55125 7.17375 5.2625 9.2775 6.67875C10.1575 6.43125 11.0925 6.3075 12.0275 6.3075C12.9625 6.3075 13.8975 6.43125 14.7775 6.67875C16.8813 5.24875 17.8025 5.55125 17.8025 5.55125C18.4075 7.06375 18.0225 8.19125 17.9125 8.46625C18.6138 9.23625 19.04 10.2125 19.04 11.4225C19.04 15.6437 16.4688 16.5787 14.0213 16.8537C14.42 17.1975 14.7638 17.8575 14.7638 18.8887C14.7638 20.36 14.75 21.5425 14.75 21.9137C14.75 22.2025 14.9563 22.5462 15.5063 22.4362C19.8513 20.9787 23 16.8537 23 12C23 5.9225 18.0775 1 12 1Z"></path>
                    </svg>
                    <svg t="1742810502087" class="icon"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3031" ><path d="M512 1024C229.2224 1024 0 794.7776 0 512S229.2224 0 512 0s512 229.2224 512 512-229.2224 512-512 512z m259.1488-568.8832H480.4096a25.2928 25.2928 0 0 0-25.2928 25.2928l-0.0256 63.2064c0 13.952 11.3152 25.2928 25.2672 25.2928h177.024c13.9776 0 25.2928 11.3152 25.2928 25.2672v12.6464a75.8528 75.8528 0 0 1-75.8528 75.8528H366.592a25.2928 25.2928 0 0 1-25.2672-25.2928v-240.1792a75.8528 75.8528 0 0 1 75.8272-75.8528h353.9456a25.2928 25.2928 0 0 0 25.2672-25.2928l0.0768-63.2064a25.2928 25.2928 0 0 0-25.2672-25.2928H417.152a189.6192 189.6192 0 0 0-189.6192 189.6448v353.9456c0 13.9776 11.3152 25.2928 25.2928 25.2928h372.9408a170.6496 170.6496 0 0 0 170.6496-170.6496v-145.408a25.2928 25.2928 0 0 0-25.2928-25.2672z" fill="#C71D23" p-id="3032"></path></svg>
                    <svg t="1742810675199" class="icon"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4966" ><path d="M675.242667 0a33.109333 33.109333 0 0 0-17.237334 4.864c-16.042667 9.472-42.752 36.309333-74.581333 75.221333l-6.656 8.192c-8.448 10.496-17.194667 21.845333-26.197333 33.834667a1654.4 1654.4 0 0 0-86.016 126.762667l-0.938667 1.536-1.877333 3.072a1746.432 1746.432 0 0 0-72.917334 131.456 1092.352 1092.352 0 0 0-46.933333 109.098666c-3.882667 10.709333-7.424 21.034667-10.666667 30.976-2.645333 8.490667-5.205333 16.981333-7.594666 25.429334-5.674667 19.925333-10.581333 39.850667-14.592 59.648l0.042666 0.085333-0.554666 2.602667a597.333333 597.333333 0 0 0-9.941334 72.192l-0.213333 2.517333c-11.946667-19.157333-43.904-37.802667-43.861333-37.632 22.912 33.194667 40.277333 66.133333 42.837333 98.474667-12.245333 2.517333-29.056-1.109333-48.469333-8.277334 20.224 18.602667 35.413333 23.722667 41.344 25.088-18.602667 1.152-37.930667 13.952-57.429334 28.629334 28.501333-11.648 51.541333-16.213333 68.053334-12.501334a5626.581333 5626.581333 0 0 0-78.634667 242.688 22.826667 22.826667 0 0 0 15.530667-15.104c4.693333-15.744 35.712-118.869333 84.352-254.464l4.181333-11.648 1.194667-3.242666c5.12-14.208 10.453333-28.714667 15.957333-43.52l3.797333-10.112 0.085334-0.213334-25.770667-50.901333 25.770667 50.858667c5.077333-13.525333 10.24-27.221333 15.573333-41.088l2.218667-5.802667 2.261333-5.845333 1.749333-4.437334-1.749333 4.48-2.261333 5.802667-2.218667 5.802667c-5.333333 13.866667-10.496 27.562667-15.573333 41.088l4.522666 8.874666 4.010667-0.426666 0.426667-1.194667c6.528-17.792 12.970667-35.157333 19.370666-52.053333l0.213334-0.597334a4420.437333 4420.437333 0 0 0-19.541334 52.650667l-0.426666 1.194667-2.858667 7.808c-5.034667 13.866667-10.112 27.946667-15.189333 42.368l-0.213334 0.64-2.176 6.101333c-3.413333 9.728-6.4 18.474667-13.184 38.357333 11.221333 5.12 20.224 18.602667 28.757334 33.877334a61.44 61.44 0 0 0-19.882667-42.197334c55.296 2.474667 102.954667-11.477333 127.616-51.925333 2.218667-3.626667 4.224-7.381333 6.016-11.434667-11.178667 14.208-25.088 20.224-51.2 18.730667 38.485333-17.237333 57.770667-33.749333 74.837333-61.141333a286.293333 286.293333 0 0 0 11.989334-21.461334c-33.664 34.56-72.618667 44.373333-113.706667 36.906667h-0.085333l-1.749334-0.298667c36.821333-4.565333 85.76-32.085333 117.418667-66.048 14.592-15.658667 27.818667-34.133333 40.064-55.722666 9.130667-16.085333 17.664-33.92 25.813333-53.674667 7.125333-17.237333 13.952-35.925333 20.565334-56.192a113.066667 113.066667 0 0 1-34.56 11.136 213.248 213.248 0 0 1-5.888 0.938667l0.085333-0.042667 0.128-0.042667c1.92-0.298667 3.797333-0.554667 5.674667-0.896 1.92-0.341333 3.84-0.682667 5.717333-1.109333l-5.674667 1.024-5.632 0.981333c34.218667-13.226667 55.808-38.698667 71.509334-69.845333a122.752 122.752 0 0 1-41.301334 18.090667 137.258667 137.258667 0 0 1-7.296 1.322666l-1.834666 0.256 0.042666-0.042666 0.384-0.042667 1.365334-0.213333a123.178667 123.178667 0 0 0 6.698666-1.237334l0.597334-0.128-0.682667 0.128-8.277333 1.408c11.861333-4.992 21.888-10.538667 30.592-17.109333a121.941333 121.941333 0 0 0 17.536-16.682667c3.413333-4.053333 6.613333-8.448 9.6-13.226666l2.730666-4.437334 3.285334-6.485333a385.024 385.024 0 0 0 15.701333-36.309333l1.322667-3.754667c1.194667-3.626667 2.218667-6.869333 2.986666-9.685333 1.152-4.224 1.877333-7.594667 2.261334-10.069334a31.189333 31.189333 0 0 1-4.010667 2.730667c-10.368 6.186667-28.16 11.818667-42.496 14.464l-4.224 0.469333-0.042667 0.042667-96.725333 10.624-0.512 1.024-3.285333 6.741333-10.026667 20.821334-1.877333 3.968 1.877333-3.968c3.370667-7.082667 6.698667-14.037333 10.026667-20.821334l3.285333-6.741333c0.170667-0.384 0.384-0.725333 0.512-1.109333l-3.584 0.384-2.858667-5.632a2314.24 2314.24 0 0 0-16.128 32.554666l-8.704 18.090667a3072.853333 3072.853333 0 0 0-46.592 102.656 4363.562667 4363.562667 0 0 0-46.122666 111.061333l3.669333-9.216a4256 4256 0 0 1 42.453333-101.845333 3119.445333 3119.445333 0 0 1 46.592-102.698667l8.704-18.090666c5.034667-10.410667 10.112-20.693333 15.274667-30.890667l0.853333-1.621333c8.149333-16.128 16.384-32 24.704-47.616 8.874667-16.64 17.92-32.896 27.008-48.682667a1412.266667 1412.266667 0 0 1 28.672-47.744l1.706667-2.730667c9.557333-15.104 19.2-29.653333 28.885333-43.562666a714.069333 714.069333 0 0 1 64.938667-81.024l-2.474667 2.645333c-6.826667 7.509333-27.477333 31.616-58.666666 79.488 30.037333-1.493333 76.16-7.637333 113.792-14.08 11.178667-62.72-10.965333-91.392-10.965334-91.392S700.501333 0.298667 675.413333 0.042667z m-70.314667 320.298667c28.16-12.970667 40.789333-24.704 52.992-41.642667 3.242667-4.693333 6.528-9.557333 9.770667-14.634667 9.941333-15.488 19.669333-32.597333 28.373333-49.578666 8.405333-16.384 15.829333-32.64 21.504-47.317334a245.76 245.76 0 0 0 8.533333-25.6c1.749333-6.698667 3.157333-13.098667 4.224-19.157333-37.674667 6.4-83.797333 12.586667-113.834666 14.037333a1274.581333 1274.581333 0 0 0-29.696 47.872c-8.704 14.72-18.005333 30.848-27.733334 48.512a2143.488 2143.488 0 0 0-50.901333 98.090667l96.725333-10.624z m154.794667-226.517334v2.816h6.656v18.730667h3.072v-18.730667h6.698666v-2.816h-16.384z m19.754666 0v21.589334h2.816v-17.109334l7.338667 14.848h1.962667l7.338666-14.848v17.109334h2.816v-21.589334h-3.712l-7.424 15.061334-7.466666-15.061334h-3.712z m-171.008 226.176l-4.352 0.682667 0.042667-0.042667 4.266667-0.682666z m-3.84 0.512l-0.213333 0.085334 0.213333-0.085334z m-116.906666 52.992l-4.522667 9.685334-5.674667 12.245333a3314.261333 3314.261333 0 0 0-39.296 88.96 4005.674667 4005.674667 0 0 0-42.624 104.362667c-6.314667 16.128-12.714667 32.64-19.157333 49.621333l-0.213333 0.597333a3314.261333 3314.261333 0 0 1 101.290666-243.584l5.674667-12.245333 4.522667-9.642667z" p-id="4967" fill="#d81e06"></path></svg>
                    <svg t="1742819526802" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9846" ><path d="M683.058 364.695c11 0 22 1.016 32.943 1.976C686.564 230.064 538.896 128 370.681 128c-188.104 0.66-342.237 127.793-342.237 289.226 0 93.068 51.379 169.827 136.725 229.256L130.72 748.43l119.796-59.368c42.918 8.395 77.37 16.79 119.742 16.79 11 0 21.46-0.48 31.914-1.442a259.168 259.168 0 0 1-10.455-71.358c0.485-148.002 128.744-268.297 291.403-268.297l-0.06-0.06z m-184.113-91.992c25.99 0 42.913 16.79 42.913 42.575 0 25.188-16.923 42.579-42.913 42.579-25.45 0-51.38-16.85-51.38-42.58 0-25.784 25.93-42.574 51.38-42.574z m-239.544 85.154c-25.384 0-51.374-16.85-51.374-42.58 0-25.784 25.99-42.574 51.374-42.574 25.45 0 42.918 16.79 42.918 42.575 0 25.188-16.924 42.579-42.918 42.579z m736.155 271.655c0-135.647-136.725-246.527-290.983-246.527-162.655 0-290.918 110.88-290.918 246.527 0 136.128 128.263 246.587 290.918 246.587 33.972 0 68.423-8.395 102.818-16.85l93.809 50.973-25.93-84.677c68.907-51.93 120.286-119.815 120.286-196.033z m-385.275-42.58c-16.923 0-34.452-16.79-34.452-34.179 0-16.79 17.529-34.18 34.452-34.18 25.99 0 42.918 16.85 42.918 34.18 0 17.39-16.928 34.18-42.918 34.18z m188.165 0c-16.984 0-33.972-16.79-33.972-34.179 0-16.79 16.927-34.18 33.972-34.18 25.93 0 42.913 16.85 42.913 34.18 0 17.39-16.983 34.18-42.913 34.18z" fill="#09BB07" p-id="9847"></path></svg>
                    <svg t="1742824750469" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10830"><path d="M776.496511 93.672426 238.646773 93.672426c-82.171488 0-149.402705 67.232241-149.402705 149.402705l0 537.849738c0 82.171488 67.232241 149.401682 149.402705 149.401682l537.848715 0c82.171488 0 149.402705-67.230194 149.402705-149.401682l0-537.849738C925.899216 160.903643 858.666976 93.672426 776.496511 93.672426zM776.496511 870.565469 238.646773 870.565469c-49.431829 0-89.641623-40.210817-89.641623-89.6406l0-537.849738c0-49.431829 40.209794-89.642646 89.641623-89.642646l537.848715 0c49.430806 0 89.641623 40.210817 89.641623 89.642646l0 438.898075c-43.565215-30.522154-112.052029-72.863495-222.556818-117.829616 37.087687-68.484767 57.280588-128.042211 59.149145-133.585461l13.07069-37.614689L537.452183 392.94344l0-60.22771 209.162764 0 0-59.759035L537.452183 272.956695l0-89.642646c0 0-28.771277 0-43.332924 0-14.560624 0-15.96153 9.42465-15.96153 11.949146 0 2.523473 0 77.692477 0 77.692477L268.528338 272.955672l0 59.759035 209.629391 0 0 60.22771L298.407855 392.942417l0 59.294454 332.85797 0c-11.263531 27.458375-26.583448 59.2218-45.288462 92.561116-78.042447-24.031323-171.69543-38.956244-235.089249-31.326473-64.167438 7.674796-112.198362 39.875173-131.777279 88.343047-17.056468 42.25436-9.367345 90.925872 20.060895 127.020952 27.970028 34.287921 70.513984 52.553936 120.179127 52.553936 12.94073 0 26.378787-1.223874 40.151465-3.765767 83.425038-15.288195 164.998915-86.896092 213.117842-161.160493 126.524648 43.682895 219.902362 112.13901 253.516948 134.578068l0 29.882588C866.137111 830.354652 825.926294 870.565469 776.496511 870.565469zM553.501718 597.234243c-40.910759 59.616796-107.149369 111.060445-164.766624 121.624035-44.601824 8.081049-82.201164-1.955538-103.253642-27.809369-15.654538-19.200294-19.857257-44.819788-10.957563-66.851571 11.337209-28.070312 40.969087-46.309722 83.455737-51.386344 9.425673-1.136893 19.288299-1.663896 29.515221-1.663896C432.665629 571.147098 500.028852 581.535703 553.501718 597.234243z" fill="#1296db" p-id="10831"></path></svg>
                </div>
                <div class="register" @click="toRegister">
                    还没注册？点击去注册
                </div>
            </div>
    </div>
    <div v-show="hidden" class="myDetail" v-else>
        <div class="welcome">
            <img src="@/assets/logo.jpg" style="height:20px;border-radius:50%"/>
            
            <h1>初次见面</h1>
            <p>注册账号，我们共同进步~</p>
            
        </div>
        <div class="loginType">
            <div class="registerType-button" :class="{active:registerType==='1'}" @click="registerType='1'">密码注册</div>
            <div class="registerType-button" :class="{active:registerType==='2'}" @click="registerType='2'">手机号注册</div>
            <div class="registerType-button" :class="{active:registerType==='3'}" @click="registerType='3'">邮箱注册</div>
        </div>
        <hr/>
        <div class="login">
            <Transition name="fade-transform" mode="out-in">
                <el-form
                v-if="registerType==='1'"
                ref="ruleForm"
                :model="registerForm"
                :rules="rules"
                class="login-form"
                >
                <el-form-item 
                prop="username"
                class="login-form-item">
                    <el-input 
                    placeholder="请输入用户名"
                    class="usernameContainer"
                    v-model="registerForm.username"
                    autocomplete="new-username"
                    >
                <template #prefix>
                    <el-icon><UserFilled/></el-icon>
                </template></el-input>
                </el-form-item>
                <el-form-item 
                prop="password"
                class="login-form-item">
                    <el-input 
                    v-model="registerForm.password"
                    placeholder="请输入密码"
                    class="passwordContainer" 
                    show-password
                    autocomplete="new-password">
                    <template #prefix>
                        <el-icon><Lock/></el-icon>
                    </template></el-input>
                </el-form-item>
                <el-button class="loginButton" @click="register">
                    {{ rmessage?"注册中...":"注册" }}
                </el-button>

                </el-form>
            </Transition>
        </div>
        <div class="footer">
            <span>
                -------- &nbsp;&nbsp;&nbsp;其他方式注册&nbsp;&nbsp;&nbsp;--------
            </span>
            <div class="svg-icon">
                <svg  aria-hidden="true" viewBox="0 0 24 24" style="fill: #b41b1b;" version="1.1"  data-view-component="true" class="icon">
                    <path d="M12 1C5.9225 1 1 5.9225 1 12C1 16.8675 4.14875 20.9787 8.52125 22.4362C9.07125 22.5325 9.2775 22.2025 9.2775 21.9137C9.2775 21.6525 9.26375 20.7862 9.26375 19.865C6.5 20.3737 5.785 19.1912 5.565 18.5725C5.44125 18.2562 4.905 17.28 4.4375 17.0187C4.0525 16.8125 3.5025 16.3037 4.42375 16.29C5.29 16.2762 5.90875 17.0875 6.115 17.4175C7.105 19.0812 8.68625 18.6137 9.31875 18.325C9.415 17.61 9.70375 17.1287 10.02 16.8537C7.5725 16.5787 5.015 15.63 5.015 11.4225C5.015 10.2262 5.44125 9.23625 6.1425 8.46625C6.0325 8.19125 5.6475 7.06375 6.2525 5.55125C6.2525 5.55125 7.17375 5.2625 9.2775 6.67875C10.1575 6.43125 11.0925 6.3075 12.0275 6.3075C12.9625 6.3075 13.8975 6.43125 14.7775 6.67875C16.8813 5.24875 17.8025 5.55125 17.8025 5.55125C18.4075 7.06375 18.0225 8.19125 17.9125 8.46625C18.6138 9.23625 19.04 10.2125 19.04 11.4225C19.04 15.6437 16.4688 16.5787 14.0213 16.8537C14.42 17.1975 14.7638 17.8575 14.7638 18.8887C14.7638 20.36 14.75 21.5425 14.75 21.9137C14.75 22.2025 14.9563 22.5462 15.5063 22.4362C19.8513 20.9787 23 16.8537 23 12C23 5.9225 18.0775 1 12 1Z"></path>
                </svg>
                <svg t="1742810502087" class="icon"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3031" ><path d="M512 1024C229.2224 1024 0 794.7776 0 512S229.2224 0 512 0s512 229.2224 512 512-229.2224 512-512 512z m259.1488-568.8832H480.4096a25.2928 25.2928 0 0 0-25.2928 25.2928l-0.0256 63.2064c0 13.952 11.3152 25.2928 25.2672 25.2928h177.024c13.9776 0 25.2928 11.3152 25.2928 25.2672v12.6464a75.8528 75.8528 0 0 1-75.8528 75.8528H366.592a25.2928 25.2928 0 0 1-25.2672-25.2928v-240.1792a75.8528 75.8528 0 0 1 75.8272-75.8528h353.9456a25.2928 25.2928 0 0 0 25.2672-25.2928l0.0768-63.2064a25.2928 25.2928 0 0 0-25.2672-25.2928H417.152a189.6192 189.6192 0 0 0-189.6192 189.6448v353.9456c0 13.9776 11.3152 25.2928 25.2928 25.2928h372.9408a170.6496 170.6496 0 0 0 170.6496-170.6496v-145.408a25.2928 25.2928 0 0 0-25.2928-25.2672z" fill="#C71D23" p-id="3032"></path></svg>
                <svg t="1742810675199" class="icon"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4966" ><path d="M675.242667 0a33.109333 33.109333 0 0 0-17.237334 4.864c-16.042667 9.472-42.752 36.309333-74.581333 75.221333l-6.656 8.192c-8.448 10.496-17.194667 21.845333-26.197333 33.834667a1654.4 1654.4 0 0 0-86.016 126.762667l-0.938667 1.536-1.877333 3.072a1746.432 1746.432 0 0 0-72.917334 131.456 1092.352 1092.352 0 0 0-46.933333 109.098666c-3.882667 10.709333-7.424 21.034667-10.666667 30.976-2.645333 8.490667-5.205333 16.981333-7.594666 25.429334-5.674667 19.925333-10.581333 39.850667-14.592 59.648l0.042666 0.085333-0.554666 2.602667a597.333333 597.333333 0 0 0-9.941334 72.192l-0.213333 2.517333c-11.946667-19.157333-43.904-37.802667-43.861333-37.632 22.912 33.194667 40.277333 66.133333 42.837333 98.474667-12.245333 2.517333-29.056-1.109333-48.469333-8.277334 20.224 18.602667 35.413333 23.722667 41.344 25.088-18.602667 1.152-37.930667 13.952-57.429334 28.629334 28.501333-11.648 51.541333-16.213333 68.053334-12.501334a5626.581333 5626.581333 0 0 0-78.634667 242.688 22.826667 22.826667 0 0 0 15.530667-15.104c4.693333-15.744 35.712-118.869333 84.352-254.464l4.181333-11.648 1.194667-3.242666c5.12-14.208 10.453333-28.714667 15.957333-43.52l3.797333-10.112 0.085334-0.213334-25.770667-50.901333 25.770667 50.858667c5.077333-13.525333 10.24-27.221333 15.573333-41.088l2.218667-5.802667 2.261333-5.845333 1.749333-4.437334-1.749333 4.48-2.261333 5.802667-2.218667 5.802667c-5.333333 13.866667-10.496 27.562667-15.573333 41.088l4.522666 8.874666 4.010667-0.426666 0.426667-1.194667c6.528-17.792 12.970667-35.157333 19.370666-52.053333l0.213334-0.597334a4420.437333 4420.437333 0 0 0-19.541334 52.650667l-0.426666 1.194667-2.858667 7.808c-5.034667 13.866667-10.112 27.946667-15.189333 42.368l-0.213334 0.64-2.176 6.101333c-3.413333 9.728-6.4 18.474667-13.184 38.357333 11.221333 5.12 20.224 18.602667 28.757334 33.877334a61.44 61.44 0 0 0-19.882667-42.197334c55.296 2.474667 102.954667-11.477333 127.616-51.925333 2.218667-3.626667 4.224-7.381333 6.016-11.434667-11.178667 14.208-25.088 20.224-51.2 18.730667 38.485333-17.237333 57.770667-33.749333 74.837333-61.141333a286.293333 286.293333 0 0 0 11.989334-21.461334c-33.664 34.56-72.618667 44.373333-113.706667 36.906667h-0.085333l-1.749334-0.298667c36.821333-4.565333 85.76-32.085333 117.418667-66.048 14.592-15.658667 27.818667-34.133333 40.064-55.722666 9.130667-16.085333 17.664-33.92 25.813333-53.674667 7.125333-17.237333 13.952-35.925333 20.565334-56.192a113.066667 113.066667 0 0 1-34.56 11.136 213.248 213.248 0 0 1-5.888 0.938667l0.085333-0.042667 0.128-0.042667c1.92-0.298667 3.797333-0.554667 5.674667-0.896 1.92-0.341333 3.84-0.682667 5.717333-1.109333l-5.674667 1.024-5.632 0.981333c34.218667-13.226667 55.808-38.698667 71.509334-69.845333a122.752 122.752 0 0 1-41.301334 18.090667 137.258667 137.258667 0 0 1-7.296 1.322666l-1.834666 0.256 0.042666-0.042666 0.384-0.042667 1.365334-0.213333a123.178667 123.178667 0 0 0 6.698666-1.237334l0.597334-0.128-0.682667 0.128-8.277333 1.408c11.861333-4.992 21.888-10.538667 30.592-17.109333a121.941333 121.941333 0 0 0 17.536-16.682667c3.413333-4.053333 6.613333-8.448 9.6-13.226666l2.730666-4.437334 3.285334-6.485333a385.024 385.024 0 0 0 15.701333-36.309333l1.322667-3.754667c1.194667-3.626667 2.218667-6.869333 2.986666-9.685333 1.152-4.224 1.877333-7.594667 2.261334-10.069334a31.189333 31.189333 0 0 1-4.010667 2.730667c-10.368 6.186667-28.16 11.818667-42.496 14.464l-4.224 0.469333-0.042667 0.042667-96.725333 10.624-0.512 1.024-3.285333 6.741333-10.026667 20.821334-1.877333 3.968 1.877333-3.968c3.370667-7.082667 6.698667-14.037333 10.026667-20.821334l3.285333-6.741333c0.170667-0.384 0.384-0.725333 0.512-1.109333l-3.584 0.384-2.858667-5.632a2314.24 2314.24 0 0 0-16.128 32.554666l-8.704 18.090667a3072.853333 3072.853333 0 0 0-46.592 102.656 4363.562667 4363.562667 0 0 0-46.122666 111.061333l3.669333-9.216a4256 4256 0 0 1 42.453333-101.845333 3119.445333 3119.445333 0 0 1 46.592-102.698667l8.704-18.090666c5.034667-10.410667 10.112-20.693333 15.274667-30.890667l0.853333-1.621333c8.149333-16.128 16.384-32 24.704-47.616 8.874667-16.64 17.92-32.896 27.008-48.682667a1412.266667 1412.266667 0 0 1 28.672-47.744l1.706667-2.730667c9.557333-15.104 19.2-29.653333 28.885333-43.562666a714.069333 714.069333 0 0 1 64.938667-81.024l-2.474667 2.645333c-6.826667 7.509333-27.477333 31.616-58.666666 79.488 30.037333-1.493333 76.16-7.637333 113.792-14.08 11.178667-62.72-10.965333-91.392-10.965334-91.392S700.501333 0.298667 675.413333 0.042667z m-70.314667 320.298667c28.16-12.970667 40.789333-24.704 52.992-41.642667 3.242667-4.693333 6.528-9.557333 9.770667-14.634667 9.941333-15.488 19.669333-32.597333 28.373333-49.578666 8.405333-16.384 15.829333-32.64 21.504-47.317334a245.76 245.76 0 0 0 8.533333-25.6c1.749333-6.698667 3.157333-13.098667 4.224-19.157333-37.674667 6.4-83.797333 12.586667-113.834666 14.037333a1274.581333 1274.581333 0 0 0-29.696 47.872c-8.704 14.72-18.005333 30.848-27.733334 48.512a2143.488 2143.488 0 0 0-50.901333 98.090667l96.725333-10.624z m154.794667-226.517334v2.816h6.656v18.730667h3.072v-18.730667h6.698666v-2.816h-16.384z m19.754666 0v21.589334h2.816v-17.109334l7.338667 14.848h1.962667l7.338666-14.848v17.109334h2.816v-21.589334h-3.712l-7.424 15.061334-7.466666-15.061334h-3.712z m-171.008 226.176l-4.352 0.682667 0.042667-0.042667 4.266667-0.682666z m-3.84 0.512l-0.213333 0.085334 0.213333-0.085334z m-116.906666 52.992l-4.522667 9.685334-5.674667 12.245333a3314.261333 3314.261333 0 0 0-39.296 88.96 4005.674667 4005.674667 0 0 0-42.624 104.362667c-6.314667 16.128-12.714667 32.64-19.157333 49.621333l-0.213333 0.597333a3314.261333 3314.261333 0 0 1 101.290666-243.584l5.674667-12.245333 4.522667-9.642667z" p-id="4967" fill="#d81e06"></path></svg>
                <svg t="1742819526802" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9846" ><path d="M683.058 364.695c11 0 22 1.016 32.943 1.976C686.564 230.064 538.896 128 370.681 128c-188.104 0.66-342.237 127.793-342.237 289.226 0 93.068 51.379 169.827 136.725 229.256L130.72 748.43l119.796-59.368c42.918 8.395 77.37 16.79 119.742 16.79 11 0 21.46-0.48 31.914-1.442a259.168 259.168 0 0 1-10.455-71.358c0.485-148.002 128.744-268.297 291.403-268.297l-0.06-0.06z m-184.113-91.992c25.99 0 42.913 16.79 42.913 42.575 0 25.188-16.923 42.579-42.913 42.579-25.45 0-51.38-16.85-51.38-42.58 0-25.784 25.93-42.574 51.38-42.574z m-239.544 85.154c-25.384 0-51.374-16.85-51.374-42.58 0-25.784 25.99-42.574 51.374-42.574 25.45 0 42.918 16.79 42.918 42.575 0 25.188-16.924 42.579-42.918 42.579z m736.155 271.655c0-135.647-136.725-246.527-290.983-246.527-162.655 0-290.918 110.88-290.918 246.527 0 136.128 128.263 246.587 290.918 246.587 33.972 0 68.423-8.395 102.818-16.85l93.809 50.973-25.93-84.677c68.907-51.93 120.286-119.815 120.286-196.033z m-385.275-42.58c-16.923 0-34.452-16.79-34.452-34.179 0-16.79 17.529-34.18 34.452-34.18 25.99 0 42.918 16.85 42.918 34.18 0 17.39-16.928 34.18-42.918 34.18z m188.165 0c-16.984 0-33.972-16.79-33.972-34.179 0-16.79 16.927-34.18 33.972-34.18 25.93 0 42.913 16.85 42.913 34.18 0 17.39-16.983 34.18-42.913 34.18z" fill="#09BB07" p-id="9847"></path></svg>
                <svg t="1742824750469" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10830"><path d="M776.496511 93.672426 238.646773 93.672426c-82.171488 0-149.402705 67.232241-149.402705 149.402705l0 537.849738c0 82.171488 67.232241 149.401682 149.402705 149.401682l537.848715 0c82.171488 0 149.402705-67.230194 149.402705-149.401682l0-537.849738C925.899216 160.903643 858.666976 93.672426 776.496511 93.672426zM776.496511 870.565469 238.646773 870.565469c-49.431829 0-89.641623-40.210817-89.641623-89.6406l0-537.849738c0-49.431829 40.209794-89.642646 89.641623-89.642646l537.848715 0c49.430806 0 89.641623 40.210817 89.641623 89.642646l0 438.898075c-43.565215-30.522154-112.052029-72.863495-222.556818-117.829616 37.087687-68.484767 57.280588-128.042211 59.149145-133.585461l13.07069-37.614689L537.452183 392.94344l0-60.22771 209.162764 0 0-59.759035L537.452183 272.956695l0-89.642646c0 0-28.771277 0-43.332924 0-14.560624 0-15.96153 9.42465-15.96153 11.949146 0 2.523473 0 77.692477 0 77.692477L268.528338 272.955672l0 59.759035 209.629391 0 0 60.22771L298.407855 392.942417l0 59.294454 332.85797 0c-11.263531 27.458375-26.583448 59.2218-45.288462 92.561116-78.042447-24.031323-171.69543-38.956244-235.089249-31.326473-64.167438 7.674796-112.198362 39.875173-131.777279 88.343047-17.056468 42.25436-9.367345 90.925872 20.060895 127.020952 27.970028 34.287921 70.513984 52.553936 120.179127 52.553936 12.94073 0 26.378787-1.223874 40.151465-3.765767 83.425038-15.288195 164.998915-86.896092 213.117842-161.160493 126.524648 43.682895 219.902362 112.13901 253.516948 134.578068l0 29.882588C866.137111 830.354652 825.926294 870.565469 776.496511 870.565469zM553.501718 597.234243c-40.910759 59.616796-107.149369 111.060445-164.766624 121.624035-44.601824 8.081049-82.201164-1.955538-103.253642-27.809369-15.654538-19.200294-19.857257-44.819788-10.957563-66.851571 11.337209-28.070312 40.969087-46.309722 83.455737-51.386344 9.425673-1.136893 19.288299-1.663896 29.515221-1.663896C432.665629 571.147098 500.028852 581.535703 553.501718 597.234243z" fill="#1296db" p-id="10831"></path></svg>
            </div>
            <div class="register" @click="toRegister">
                点错了？去登陆~
            </div>
        </div>
</div>

</template>
<script setup lang="ts">
import {Search,ArrowUp,ArrowDown,Watch,Bell,UserFilled,Lock,Document,DocumentAdd,Cpu} from '@element-plus/icons-vue'
import { ElForm, ElMessage, FormInstance } from 'element-plus';
import { ref,reactive,onMounted,onUnmounted} from 'vue'
import { useRouter } from 'vue-router';
import {useAuthStore} from "@/store/modules/auth";
import { registerByPassword } from '@/api/auth';
import defaultAvatar from '@/assets/avatar.png'

const router=useRouter()
const hidden=ref(false);
const ruleForm=ref<FormInstance | null>(null);
const authStore=useAuthStore();

let loginType=ref('1');
let registerType=ref('1');
let isHovered=ref(false);
let message=ref(false);
let rmessage=ref(false);
let actions=ref(true);
const textarea=ref('')
let loginForm=reactive({
    username:"",
    password:""
})

let registerForm=reactive({
    username:"",
    password:""
})

const emit=defineEmits<{(event:'search-event',data:string):void}>()

const handleFind=()=>{
    emit('search-event',textarea.value)
}
const rules={
    username:[
        {required:true,message:"请输入用户名",trigger:'blur'},
        {min:3,max:18,message:"请输入3至18之间",trigger:'blur'}
    ],
    password:[
        {required:true,message:"请输入密码",trigger:'blur'},
        {min:8,max:16,message:"请输入至少8位，至多16位的密码",trigger:'blur'}
    ]
}

const toAi=()=>{
    router.push('/ai')
}

const toHome=()=>{
    router.push('/article')
}

const resetForm=()=>{
    loginForm={username:'',password:''};
    registerForm={username:'',password:''};
    ruleForm.value?.resetFields();
}

const toRegister=()=>{
    actions.value=!actions.value;
}

const myContainer=()=>{
    if(authStore.isLoggedIn){
       router.push('/user')
    }
    else{
        hidden.value=true;
    }
    
}
 const closeDetail=()=>{
    resetForm();
    hidden.value=false;
    actions.value=true;
 }

const backHome=()=>{
    router.push('/')
}
const login=async()=>{
    message.value=!message.value;
    if(ruleForm.value?.validate){
        try{
            await authStore.login(loginForm);
            ElMessage.success("登陆成功!");
            resetForm();
            closeDetail();
        }catch(error){
            ElMessage.error("登陆失败!");
            console.log(error);
        }
        finally{
            message.value=!message.value;
        }
    }
    
}
const register=async()=>{
    rmessage.value=!rmessage.value;
    if(ruleForm.value?.validate){
        try{
            await registerByPassword(registerForm);
            ElMessage.success("注册成功!");
            resetForm();
            actions.value=true;
        }
        catch(error){
            ElMessage.error("登陆失败！");
            console.log(error);
        }
        finally{
            rmessage.value=!rmessage.value;
        }
    }
}


const toWriteArticle=()=>{
    if(!authStore.isLoggedIn){
        ElMessage.error("请先登录");
        hidden.value=true;
        return
    }
    router.push('/writeArticle')
}


const toLookArticle=()=>{
    if(!authStore.isLoggedIn){
        ElMessage.error("请先登录");
        hidden.value=true
        return
    }
    router.push('/test')

}

</script>

<style lang="scss" scoped>
    .body{
        margin:0;
        width:100vw;
        min-height:100vh;
        background:rgb(228, 231, 228);
        z-index:0;
        display: flex;
        flex-direction: column;
    }
    .header-container{
        top:0px;
        left:0%;
        max-width:100vw;
        height:60px;
        display: flex;
        flex-direction: row;
        align-items: center;
        background-color: white;
        z-index:9;
        position: sticky;
        flex-shrink: 0;

    }
    .content-wrapper{
        flex:1;
        width:100%;
        margin: 0 auto;
        padding:20px;
    }
    .logo{
        position: relative;
        display: flex;
        flex-direction: row;
        align-items: center;
        left:4%;
    }
    .logo-photo{
        height:35px;
        padding-right: 10px;
        border-radius: 50%;
        
    }
    h1{ font-family:  宋体;
        font-size: 21px;
        font-weight: 500;
        cursor: pointer;
    }
    .header-list{
        position: relative;
        left:8%;
        display: flex;
        flex-direction: row;
        align-items: center;
    }
    .header-list-item{
        padding-right: 30px;
    }
    .header-list-item span{
        font-size: 16px;
        cursor: pointer;

    }
    .header-list-item :active{
        color:aquamarine;
    }
    .search{
        position: relative;
        left:10%;
        width:360px;
        right:460px;
    }
    .createCenter{
        position: relative; 
        left:15%;
        right:250px;
        box-shadow: 0 0 10px rgb(106, 172, 96);

        .el-button {
            color:white;
            letter-spacing: 2px;
            background-color:rgb(50, 173, 50); 
            height:38px;
        }
    }
    .vip{
        
       position:absolute;
       left:82%;
       display: flex;
       align-items: center;
        
    }
    .vipIcon{
        color:rgb(12, 149, 55);
        padding-right: 10px;
        font-size: 23px;
        
    }
    .message{
        position: absolute;
        left:89%;
        right:110px;
        display: flex;
        align-items: center;
        
    }
    @media (max-width:1114px) {
        .vip,.message{
            display: none;
        }
    }
    .messageIcon{
        color:rgb(95, 200, 86);
        font-size:23px;
    }
    .me{
        position: absolute;
        right:3%;
        cursor: pointer;
        .img{
            height:45px;
            width:auto;
            border-radius: 50%;
        }
    }

    @media(max-width:1250px){
        .header-list{
            display: none;
            
        }
    }
    @media(max-width:1020px){
        .search{
            width:150px ! important;
        }
    }
    @media(max-width:780px){
        .search{
            display: none;
            
        }
        .createCenter{
            width:100px ! important;
        }
    }
    

    .overlay{
        position:fixed;
        top:0;
        left:0;
        right:0;
        bottom:0;
        background-color: rgba(0,0,0,0.5);
        z-index:99;
        pointer-events: all;
    }


    .myDetail{
        position: fixed;
        top:17%;
        left:38%;
        width:400px;
        height:510px;
      
        z-index:100;
        border-radius: 4%;
        box-shadow: 0 0 25px rgb(175, 136, 211);

    }
    .welcome{
        position: relative;
        width:100%;
        height:110px;
        border-radius: 6% 6% 0 0;
        background:linear-gradient(to right,#d569ed,rgb(150, 100, 230));
        box-shadow:inset 0 0 10px #d569ed;
      

        span{
            position: relative;
            top:0%;
            left:0%;
            font-family: 仿宋;
            font-size: 20px;
            color:white;
            font-weight: 500;

        }
        h1{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight:500;
            font-size:25px;
            letter-spacing: 2px;
            color:white;
            margin-top: 0;
            font-family: KaiTi;
        }

        p{  
            display: flex;
            justify-content: center;
            font-size: 12px;
            color:rgb(255, 250, 250);
        }
    }
    .loginType{
        position: relative;
        width:100%;
        height:50px;
       display: grid;
       grid-template-columns: repeat(3,1fr);
       gap:0;
       display: flex;
       align-items: center;
       justify-content: space-around;
        background:white;
       
    }
   
    .loginType-button{
        margin:0;
        border:none;
        font-family: 宋体;
        cursor: pointer;
        height:50px;
        width:133px;
        display: flex;
        justify-content: center;
        align-items: center;

       
    }
    .loginType-button:hover{
      box-shadow:inset 0 0 20px rgba(156, 224, 156, 0.9);
      
    }
    .loginType-button.active{
        box-shadow:inset 0 0 20px rgba(156, 224, 156, 0.9);
    }

    .registerType-button{
        margin:0;
        border:none;
        font-family: 宋体;
        cursor: pointer;
        height:50px;
        width:133px;
        display: flex;
        justify-content: center;
        align-items: center;
    } 
    .registerType-button:hover{
        box-shadow:inset 0 0 20px rgba(156, 224, 156, 0.9);
        
      }
    .registerType-button.active{
          box-shadow:inset 0 0 20px rgba(156, 224, 156, 0.9);
      }
    
    .login{
        background:white;
        width:100%;
        height:180px;

        span{
            position:float;
            float:right;
            padding:5px 10px 0 0;
            right:0%;
            color:rgb(38, 199, 199);
            font-size: 12px;
            font-family: 仿宋;
        }
    }
    :deep(.el-form-item__error) {
        padding-left: 75px;
        padding-top:18px;
        
    }
    .usernameContainer{
        position: relative;
        margin-top: 15px;
        top:20%;
        left:10%;
        height:35px;
        width:80%;
        border-radius: 15%;
        
    }
    .passwordContainer{
    
        top:50%;
        left:10%;
        height:35px;
        width:80%;
        border-radius: 15%;
    }
    .loginButton{
        position: absolute;
        left:10%;
        top:62%;
        width:80%;
        height:45px;
        border-radius: 4%;
        letter-spacing: 5px;
        font-family: 仿宋;
        font-size:20px;
        color:white;
        background: linear-gradient(to right,rgb(212, 138, 138),rgb(157, 207, 157),rgb(150, 200, 204),rgb(203, 158, 216));

    }
    hr{
        height:1px;
        margin:0;
        background-color: rgb(231, 234, 229);
    }
    .footer{
        padding-top: 30px;
        background-color:white;
        width:100%;
        height:136px;
        border-radius: 0 0 6% 6%;
        span{
            position: relative;
            left:10%;
            letter-spacing: 2px;
            font-size:12px;
            font-family: 宋体;
            color:rgba(165, 158, 158, 0.9);
        }
    }
    .svg-icon{
        display: flex;
        justify-content: center;
        align-items: center;
        height:65px;
        
    }
    .icon{
        height:25px;
        padding:0 10px;
    }
    .register{
        color:rgb(71, 239, 183);
        letter-spacing: 2px;
        font-size:13px;
        display: flex;
        justify-self: center;
        cursor: pointer;
    }

    .create-icon{
        color:rgb(78, 204, 78);
        margin-right: 10px;
        
    }
</style>